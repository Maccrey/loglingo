module.exports=[43726,a=>{"use strict";let b=(0,a.i(16195).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);a.s(["Trash2",()=>b],43726)},80025,32564,a=>{"use strict";var b=a.i(71544),c=a.i(62444),d=a.i(83744);let e=c.forwardRef(({className:a,type:c,...e},f)=>(0,b.jsx)("input",{type:c,className:(0,d.cn)("flex h-10 w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-foreground placeholder:text-white/40 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary disabled:cursor-not-allowed disabled:opacity-50 backdrop-blur-sm transition-all hover:bg-white/10",a),ref:f,...e}));function f(a,b){}e.displayName="Input",a.s(["Input",()=>e],80025),a.s(["trackEvent",()=>f],32564)},12834,a=>{"use strict";var b=a.i(903);a.i(91105);var c=a.i(93019);let d=(0,c.collection)(b.db,"learning_archive");function e(a){let b=a.data(),d=b.createdAt instanceof c.Timestamp?b.createdAt.toDate():new Date(b.createdAt??Date.now());return{id:a.id,userId:b.userId,type:b.type,title:b.title,examples:b.examples||[],rootMeaning:b.rootMeaning||"",sourceId:b.sourceId,createdAt:d}}async function f(a,b,f){if(console.log("ðŸ” Archive Repository: listArchive called",{userId:a,type:b,sourceId:f}),!a)return console.log("âš ï¸ Archive Repository: No userId, returning empty array"),[];try{let g=[(0,c.where)("userId","==",a)];b&&g.push((0,c.where)("type","==",b)),f&&g.push((0,c.where)("sourceId","==",f));let h=(0,c.query)(d,...g);console.log("ðŸ” Archive Repository: Executing query...");let i=(await (0,c.getDocs)(h)).docs.map(e);return i.sort((a,b)=>b.createdAt.getTime()-a.createdAt.getTime()),console.log("âœ… Archive Repository: Query complete",{count:i.length,results:i.slice(0,2)}),i}catch(a){throw console.error("âŒ Archive Repository: Query failed",a),a}}async function g(a,b){if(console.log("ðŸ” Archive Repository: checkDuplicate",{userId:a,title:b}),!a||!b)return!1;try{let e=(0,c.query)(d,(0,c.where)("userId","==",a),(0,c.where)("title","==",b)),f=!(await (0,c.getDocs)(e)).empty;return console.log(f?"âš ï¸ Archive Repository: Duplicate found":"âœ… Archive Repository: No duplicate"),f}catch(a){return console.error("âŒ Archive Repository: Check duplicate failed",a),!1}}async function h(a){let b={...a,createdAt:(0,c.serverTimestamp)()},f=await (0,c.addDoc)(d,b);return(await (0,c.getDocs)((0,c.query)(d,(0,c.where)("__name__","==",f.id)))).docs.map(e)[0]}a.s(["checkDuplicate",()=>g,"createArchive",()=>h,"listArchive",()=>f])},16002,a=>{"use strict";var b=a.i(93051),c=a.i(61738),d=a.i(81473),e=a.i(12834);async function f(a){if(!a.title.trim())throw Error("title-required");return(0,e.createArchive)({...a,examples:a.examples?.filter(Boolean)??[],rootMeaning:a.rootMeaning??""})}async function g(a,b,c){return(0,e.listArchive)(a,b,c)}function h(a){let b=a.options.map((a,b)=>({option:a,index:b})).sort(()=>Math.random()-.5),c=b.findIndex(b=>b.index===a.correctIndex);return{...a,options:b.map(a=>a.option),correctIndex:c}}var i=a.i(903);a.i(91105);var j=a.i(93019);let k=(0,j.collection)(i.db,"quizzes");function l(a){let b=a.data(),c=b.createdAt instanceof j.Timestamp?b.createdAt.toDate():new Date(b.createdAt??Date.now());return{id:a.id,archiveId:b.archiveId,question:b.question,options:b.options||[],correctIndex:b.correctIndex??0,explanation:b.explanation||"",createdAt:c}}async function m(a){if(console.log("ðŸ” Quiz Repository: getQuizByArchiveId called",{archiveId:a}),!a)return console.log("âš ï¸ Quiz Repository: No archiveId provided"),null;try{let b=(0,j.query)(k,(0,j.where)("archiveId","==",a)),c=await (0,j.getDocs)(b);if(c.empty)return console.log("ðŸ“­ Quiz Repository: No quiz found for archiveId",a),null;let d=l(c.docs[0]);return console.log("âœ… Quiz Repository: Quiz found",{quizId:d.id}),d}catch(a){return console.error("âŒ Quiz Repository: Query failed",a),null}}async function n(a){console.log("ðŸ’¾ Quiz Repository: Creating quiz",{archiveId:a.archiveId});let b={...a,createdAt:(0,j.serverTimestamp)()},c=await (0,j.addDoc)(k,b),d=l((await (0,j.getDocs)((0,j.query)(k,(0,j.where)("__name__","==",c.id)))).docs[0]);return console.log("âœ… Quiz Repository: Quiz created",{quizId:d.id}),d}async function o(a){try{let b=await fetch("/api/quiz/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!b.ok)return console.error("Quiz generation API failed:",b.status),null;return await b.json()}catch(a){return console.error("Quiz generation request failed:",a),null}}async function p(a,b,c,d,e,f,g){console.log("ðŸŽ¯ Quiz Service: getOrGenerateQuiz",{archiveId:a,title:b});let i=await m(a);if(i)return console.log("âœ… Quiz Service: Found existing quiz",{quizId:i.id}),h(i);console.log("ðŸ¤– Quiz Service: No quiz found, generating with Grok AI...");let j=await o({title:b,rootMeaning:c,examples:d,uiLocale:f,learningLanguage:g});if(!j)return console.error("âŒ Quiz Service: Quiz generation failed"),null;let k={archiveId:a,question:e,options:j.options,correctIndex:j.correctIndex,explanation:j.explanation},l=await n(k);return console.log("ðŸ’¾ Quiz Service: Quiz saved to Firebase",{quizId:l.id}),h(l)}var q=a.i(62444);function r(a,b,d){return(0,c.useQuery)({queryKey:["archives",a,b??"all",d?.sourceId??"all"],queryFn:()=>g(a,b,d?.sourceId),enabled:(d?.enabled??!0)&&!!a,staleTime:6e4,refetchOnMount:!0})}function s(a){let c=(0,d.useQueryClient)();return{create:(0,b.useMutation)({mutationFn:f,onSuccess:()=>c.invalidateQueries({queryKey:["archives",a]})})}}function t(a,b,c,d){let[e,f]=(0,q.useState)(null),[g,h]=(0,q.useState)(!1),[i,j]=(0,q.useState)(null);return(0,q.useEffect)(()=>{if(!a||!b){f(null),h(!1);return}let e=!1;return async function(){if(a&&b){h(!0),j(null);try{let g=await p(a.id,a.title,a.rootMeaning||a.title,a.examples||[],b,c||"en",d||"en");!e&&(f(g),g||j("Quiz generation failed"))}catch(a){e||(console.error("Quiz loading error:",a),j("Failed to load quiz"),f(null))}finally{e||h(!1)}}}(),()=>{e=!0}},[a?.id,b,c,d]),{quiz:e,isLoading:g,error:i}}a.s(["useArchiveList",()=>r,"useArchiveMutations",()=>s,"useQuiz",()=>t],16002)},38790,a=>{"use strict";let b=(0,a.i(16195).default)("archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);a.s(["Archive",()=>b],38790)},14476,a=>{"use strict";function b(){return"demo-user"}a.i(903),a.s(["getCurrentUserId",()=>b])},83891,a=>{"use strict";var b=a.i(71544),c=a.i(56887),d=a.i(80657),e=a.i(14476),f=a.i(82734),g=a.i(22172);function h(){let a=(0,e.getCurrentUserId)(),h=(0,f.useRouter)(),{create:i}=(0,d.useDiaryMutations)(a);return(0,b.jsx)(g.AuthGate,{children:(0,b.jsx)("div",{className:"mx-auto max-w-3xl space-y-6",children:(0,b.jsx)(c.DiaryForm,{onSubmit:a=>i.mutateAsync(a).then(()=>h.push("/diary")),isSubmitting:i.isPending})})})}a.s(["default",()=>h])},28920,a=>{a.v(a=>Promise.resolve().then(()=>a(12834)))}];

//# sourceMappingURL=Development_Loglingo_43197099._.js.map