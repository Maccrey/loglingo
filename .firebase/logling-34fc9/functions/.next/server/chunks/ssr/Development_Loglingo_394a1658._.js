module.exports=[43726,a=>{"use strict";let b=(0,a.i(16195).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);a.s(["Trash2",()=>b],43726)},64856,a=>{"use strict";function b(a,b){let c="string"==typeof a?new Date(`${a}T00:00:00`):a;return new Intl.DateTimeFormat(b,{year:"numeric",month:"short",day:"numeric"}).format(c)}a.s(["formatDate",()=>b])},28492,a=>{"use strict";let b=(0,a.i(16195).default)("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);a.s(["Edit3",()=>b],28492)},44725,a=>{"use strict";var b=a.i(71544),c=a.i(62444),d=a.i(70611),e=a.i(58081),f=a.i(16195);let g=(0,f.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),h=(0,f.default)("calendar-days",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);var i=a.i(28492),j=a.i(43726),k=a.i(82734),l=a.i(82969),m=a.i(5689),n=a.i(80657),o=a.i(65638),p=a.i(98260),q=a.i(8593),r=a.i(64856),s=a.i(22172);function t(){let a=(0,l.useTranslations)("diary"),f=(0,m.useLocale)(),t=(0,k.useRouter)(),{user:u,loading:v}=(0,o.useAuth)(),w=u?.uid??"",x=new Date().getFullYear(),[y,z]=(0,c.useState)(null),[A,B]=(0,c.useState)(null),C=!!w&&!v,{data:D=[],isLoading:E}=(0,n.useDiaryList)(w,void 0,{enabled:C});console.log("ðŸ“ Diary Page State:",{userId:w,loading:v,enabled:C,isLoading:E,diariesCount:D.length,diaries:D.slice(0,2)});let{remove:F}=(0,n.useDiaryMutations)(w),G=(0,c.useMemo)(()=>Array.from({length:12},(a,b)=>new Intl.DateTimeFormat(f,{month:"short"}).format(new Date(2020,b,1))),[f]),H=(0,c.useMemo)(()=>{let a=new Set;return D.forEach(b=>a.add(Number(b.date.split("-")[0]))),Array.from(a).sort((a,b)=>b-a)},[D,x]),I=(0,c.useMemo)(()=>null===y?D:D.filter(a=>Number(a.date.split("-")[0])===y),[D,y]),J=(0,c.useMemo)(()=>{let a={};return I.forEach(b=>{let c=new Date(`${b.date}T00:00:00`).getMonth();a[c]=(a[c]||0)+1}),a},[I]),K=(0,c.useMemo)(()=>null===A?I:I.filter(a=>new Date(`${a.date}T00:00:00`).getMonth()===A),[I,A]),L=async b=>{if(confirm(a("confirm_delete")))try{await F.mutateAsync(b.id),p.toast.success(a("delete_success"))}catch{p.toast.error(a("delete_error"))}},M=v||E||!C;return(0,b.jsx)(s.AuthGate,{children:(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:a("title")}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a("subtitle")})]}),(0,b.jsx)(k.Link,{href:"/diary/new",children:(0,b.jsxs)(d.Button,{children:[(0,b.jsx)(g,{className:"mr-2 h-4 w-4"}),a("new_entry")]})})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,b.jsxs)(e.Card,{className:"md:col-span-1",children:[(0,b.jsxs)(e.CardHeader,{className:"flex flex-row items-center justify-between",children:[(0,b.jsx)(e.CardTitle,{className:"text-sm text-muted-foreground",children:a("filter_year")}),(0,b.jsx)(h,{className:"h-4 w-4 text-primary"})]}),(0,b.jsxs)(e.CardContent,{className:"space-y-2",children:[(0,b.jsxs)("select",{className:"w-full rounded-lg border border-white/10 bg-white/5 p-2 text-sm",value:null===y?"":y,onChange:a=>{z(""===a.target.value?null:Number(a.target.value))},children:[(0,b.jsx)("option",{value:"",children:a("all_years",{default:"All years"})}),H.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:a("filter_month")}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[(0,b.jsx)("button",{className:`rounded-md border border-white/10 px-3 py-2 text-left transition ${null===A?"bg-primary/20 text-primary-foreground":"hover:bg-white/5"}`,onClick:()=>B(null),children:a("all_months")}),G.map((a,c)=>(0,b.jsx)("button",{className:`rounded-md border border-white/10 px-3 py-2 text-left transition ${A===c?"bg-primary/20 text-primary-foreground":"hover:bg-white/5"}`,onClick:()=>B(c),children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{children:a}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:J[c]||0})]})},a))]})]})]}),(0,b.jsx)("div",{className:"md:col-span-2 space-y-4",children:M?(0,b.jsx)(e.Card,{className:"border-dashed bg-transparent p-6 text-center",children:(0,b.jsx)("p",{className:"text-muted-foreground",children:a("loading")})}):0===K.length?(0,b.jsxs)(e.Card,{className:"flex min-h-[200px] flex-col items-center justify-center border-dashed bg-transparent text-center",children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:a("empty")}),(0,b.jsx)(k.Link,{href:"/diary/new",className:"mt-3 inline-flex",children:(0,b.jsxs)(d.Button,{size:"sm",children:[(0,b.jsx)(g,{className:"mr-2 h-4 w-4"}),a("new_entry")]})})]}):(0,b.jsx)("div",{className:"grid gap-4",children:K.map(c=>(0,b.jsx)("div",{onClick:()=>t.push(`/diary/${c.id}`),className:"block",children:(0,b.jsxs)(e.Card,{className:"glass-card border-white/10 transition-all hover:shadow-lg hover:border-primary/40 cursor-pointer",children:[(0,b.jsxs)(e.CardHeader,{className:"flex flex-row items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:(0,r.formatDate)(c.date,f)}),(0,b.jsx)(e.CardTitle,{className:"line-clamp-1 text-xl",children:c.content.slice(0,40)||a("untitled")})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(d.Button,{variant:"secondary",size:"sm",onClick:a=>{a.stopPropagation(),t.push(`/diary/${c.id}/edit`)},children:(0,b.jsx)(i.Edit3,{className:"h-4 w-4"})}),(0,b.jsxs)(d.Button,{variant:"ghost",size:"sm",onClick:a=>{a.preventDefault(),a.stopPropagation(),L(c)},disabled:F.isPending,children:[(0,b.jsx)(j.Trash2,{className:"mr-2 h-4 w-4"}),a("delete")]})]})]}),(0,b.jsxs)(e.CardContent,{className:"space-y-3",children:[c.imageUrl&&(0,b.jsx)(q.default,{src:c.imageUrl,alt:"Diary attachment",width:1200,height:800,className:"h-48 w-full rounded-lg object-cover",loading:"lazy",sizes:"(max-width: 768px) 100vw, 700px"}),(0,b.jsx)("p",{className:"line-clamp-3 text-sm leading-relaxed text-muted-foreground",children:c.content})]}),(0,b.jsxs)(e.CardFooter,{className:"flex items-center justify-between text-xs text-muted-foreground",children:[(0,b.jsxs)("span",{children:[a("year_label"),": ",c.date.split("-")[0]]}),(0,b.jsxs)("span",{children:[a("month_label"),": ",G[new Date(`${c.date}T00:00:00`).getMonth()]]})]})]})},c.id))})})]})]})})}a.s(["default",()=>t],44725)}];

//# sourceMappingURL=Development_Loglingo_394a1658._.js.map