(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70337,e=>{"use strict";function t(e,t){let r="string"==typeof e?new Date(`${e}T00:00:00`):e;return new Intl.DateTimeFormat(t,{year:"numeric",month:"short",day:"numeric"}).format(r)}e.s(["formatDate",()=>t])},73406,e=>{"use strict";var t=e.i(54661),r=e.i(50702),s=e.i(63279),i=e.i(60125);async function n(e){if(!e.title.trim())throw Error("title-required");return(0,i.createArchive)({...e,examples:e.examples?.filter(Boolean)??[],rootMeaning:e.rootMeaning??""})}async function a(e,t,r){return(0,i.listArchive)(e,t,r)}function o(e){let t=e.options.map((e,t)=>({option:e,index:t})).sort(()=>Math.random()-.5),r=t.findIndex(t=>t.index===e.correctIndex);return{...e,options:t.map(e=>e.option),correctIndex:r}}var u=e.i(56036);e.i(23166);var l=e.i(80263);let c=(0,l.collection)(u.db,"quizzes");function h(e){let t=e.data(),r=t.createdAt instanceof l.Timestamp?t.createdAt.toDate():new Date(t.createdAt??Date.now());return{id:e.id,archiveId:t.archiveId,question:t.question,options:t.options||[],correctIndex:t.correctIndex??0,explanation:t.explanation||"",createdAt:r}}async function d(e){if(console.log("ðŸ” Quiz Repository: getQuizByArchiveId called",{archiveId:e}),!e)return console.log("âš ï¸ Quiz Repository: No archiveId provided"),null;try{let t=(0,l.query)(c,(0,l.where)("archiveId","==",e)),r=await (0,l.getDocs)(t);if(r.empty)return console.log("ðŸ“­ Quiz Repository: No quiz found for archiveId",e),null;let s=h(r.docs[0]);return console.log("âœ… Quiz Repository: Quiz found",{quizId:s.id}),s}catch(e){return console.error("âŒ Quiz Repository: Query failed",e),null}}async function p(e){console.log("ðŸ’¾ Quiz Repository: Creating quiz",{archiveId:e.archiveId});let t={...e,createdAt:(0,l.serverTimestamp)()},r=await (0,l.addDoc)(c,t),s=h((await (0,l.getDocs)((0,l.query)(c,(0,l.where)("__name__","==",r.id)))).docs[0]);return console.log("âœ… Quiz Repository: Quiz created",{quizId:s.id}),s}async function f(e){try{let t=await fetch("/api/quiz/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)return console.error("Quiz generation API failed:",t.status),null;return await t.json()}catch(e){return console.error("Quiz generation request failed:",e),null}}async function m(e,t,r,s,i,n,a){console.log("ðŸŽ¯ Quiz Service: getOrGenerateQuiz",{archiveId:e,title:t});let u=await d(e);if(u)return console.log("âœ… Quiz Service: Found existing quiz",{quizId:u.id}),o(u);console.log("ðŸ¤– Quiz Service: No quiz found, generating with Grok AI...");let l=await f({title:t,rootMeaning:r,examples:s,uiLocale:n,learningLanguage:a});if(!l)return console.error("âŒ Quiz Service: Quiz generation failed"),null;let c={archiveId:e,question:i,options:l.options,correctIndex:l.correctIndex,explanation:l.explanation},h=await p(c);return console.log("ðŸ’¾ Quiz Service: Quiz saved to Firebase",{quizId:h.id}),o(h)}var y=e.i(59372);function v(e,t,s){return(0,r.useQuery)({queryKey:["archives",e,t??"all",s?.sourceId??"all"],queryFn:()=>a(e,t,s?.sourceId),enabled:(s?.enabled??!0)&&!!e,staleTime:6e4,refetchOnMount:!0})}function g(e){let r=(0,s.useQueryClient)();return{create:(0,t.useMutation)({mutationFn:n,onSuccess:()=>r.invalidateQueries({queryKey:["archives",e]})})}}function b(e,t,r,s){let[i,n]=(0,y.useState)(null),[a,o]=(0,y.useState)(!1),[u,l]=(0,y.useState)(null);return(0,y.useEffect)(()=>{if(!e||!t){n(null),o(!1);return}let i=!1;return async function(){if(e&&t){o(!0),l(null);try{let a=await m(e.id,e.title,e.rootMeaning||e.title,e.examples||[],t,r||"en",s||"en");!i&&(n(a),a||l("Quiz generation failed"))}catch(e){i||(console.error("Quiz loading error:",e),l("Failed to load quiz"),n(null))}finally{i||o(!1)}}}(),()=>{i=!0}},[e?.id,t,r,s]),{quiz:i,isLoading:a,error:u}}e.s(["useArchiveList",()=>v,"useArchiveMutations",()=>g,"useQuiz",()=>b],73406)},60125,e=>{"use strict";var t=e.i(56036);e.i(23166);var r=e.i(80263);let s=(0,r.collection)(t.db,"learning_archive");function i(e){let t=e.data(),s=t.createdAt instanceof r.Timestamp?t.createdAt.toDate():new Date(t.createdAt??Date.now());return{id:e.id,userId:t.userId,type:t.type,title:t.title,examples:t.examples||[],rootMeaning:t.rootMeaning||"",sourceId:t.sourceId,createdAt:s}}async function n(e,t,n){if(console.log("ðŸ” Archive Repository: listArchive called",{userId:e,type:t,sourceId:n}),!e)return console.log("âš ï¸ Archive Repository: No userId, returning empty array"),[];try{let a=[(0,r.where)("userId","==",e)];t&&a.push((0,r.where)("type","==",t)),n&&a.push((0,r.where)("sourceId","==",n));let o=(0,r.query)(s,...a);console.log("ðŸ” Archive Repository: Executing query...");let u=(await (0,r.getDocs)(o)).docs.map(i);return u.sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime()),console.log("âœ… Archive Repository: Query complete",{count:u.length,results:u.slice(0,2)}),u}catch(e){throw console.error("âŒ Archive Repository: Query failed",e),e}}async function a(e,t){if(console.log("ðŸ” Archive Repository: checkDuplicate",{userId:e,title:t}),!e||!t)return!1;try{let i=(0,r.query)(s,(0,r.where)("userId","==",e),(0,r.where)("title","==",t)),n=!(await (0,r.getDocs)(i)).empty;return console.log(n?"âš ï¸ Archive Repository: Duplicate found":"âœ… Archive Repository: No duplicate"),n}catch(e){return console.error("âŒ Archive Repository: Check duplicate failed",e),!1}}async function o(e){let t={...e,createdAt:(0,r.serverTimestamp)()},n=await (0,r.addDoc)(s,t);return(await (0,r.getDocs)((0,r.query)(s,(0,r.where)("__name__","==",n.id)))).docs.map(i)[0]}e.s(["checkDuplicate",()=>a,"createArchive",()=>o,"listArchive",()=>n])},54661,50702,e=>{"use strict";let t;var r=e.i(59372),s=e.i(55570),i=e.i(5604),n=e.i(5361),a=e.i(25376),o=class extends n.Subscribable{#e;#t=void 0;#r;#s;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,a.shallowEqualObjects)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,a.hashKey)(t.mutationKey)!==(0,a.hashKey)(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(e){this.#i(),this.#n(e)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#i(),this.#n()}mutate(e,t){return this.#s=t,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(e)}#i(){let e=this.#r?.state??(0,s.getDefaultState)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#n(e){i.notifyManager.batch(()=>{if(this.#s&&this.hasListeners()){let t=this.#t.variables,r=this.#t.context,s={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};e?.type==="success"?(this.#s.onSuccess?.(e.data,t,r,s),this.#s.onSettled?.(e.data,null,t,r,s)):e?.type==="error"&&(this.#s.onError?.(e.error,t,r,s),this.#s.onSettled?.(void 0,e.error,t,r,s))}this.listeners.forEach(e=>{e(this.#t)})})}},u=e.i(63279);function l(e,t){let s=(0,u.useQueryClient)(t),[n]=r.useState(()=>new o(s,e));r.useEffect(()=>{n.setOptions(e)},[n,e]);let l=r.useSyncExternalStore(r.useCallback(e=>n.subscribe(i.notifyManager.batchCalls(e)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),c=r.useCallback((e,t)=>{n.mutate(e,t).catch(a.noop)},[n]);if(l.error&&(0,a.shouldThrowError)(n.options.throwOnError,[l.error]))throw l.error;return{...l,mutate:c,mutateAsync:l.mutate}}e.s(["useMutation",()=>l],54661);var c=e.i(30628),h=e.i(84302),d=n,p=e.i(29043),f=e.i(99756),m=class extends d.Subscribable{constructor(e,t){super(),this.options=t,this.#e=e,this.#a=null,this.#o=(0,p.pendingThenable)(),this.bindMethods(),this.setOptions(t)}#e;#u=void 0;#l=void 0;#t=void 0;#c;#h;#o;#a;#d;#p;#f;#m;#y;#v;#g=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.#u.addObserver(this),y(this.#u,this.options)?this.#b():this.updateResult(),this.#x())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return v(this.#u,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return v(this.#u,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#R(),this.#Q(),this.#u.removeObserver(this)}setOptions(e){let t=this.options,r=this.#u;if(this.options=this.#e.defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof(0,a.resolveEnabled)(this.options.enabled,this.#u))throw Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#I(),this.#u.setOptions(this.options),t._defaulted&&!(0,a.shallowEqualObjects)(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#u,observer:this});let s=this.hasListeners();s&&g(this.#u,r,this.options,t)&&this.#b(),this.updateResult(),s&&(this.#u!==r||(0,a.resolveEnabled)(this.options.enabled,this.#u)!==(0,a.resolveEnabled)(t.enabled,this.#u)||(0,a.resolveStaleTime)(this.options.staleTime,this.#u)!==(0,a.resolveStaleTime)(t.staleTime,this.#u))&&this.#w();let i=this.#C();s&&(this.#u!==r||(0,a.resolveEnabled)(this.options.enabled,this.#u)!==(0,a.resolveEnabled)(t.enabled,this.#u)||i!==this.#v)&&this.#S(i)}getOptimisticResult(e){var t,r;let s=this.#e.getQueryCache().build(this.#e,e),i=this.createResult(s,e);return t=this,r=i,(0,a.shallowEqualObjects)(t.getCurrentResult(),r)||(this.#t=i,this.#h=this.options,this.#c=this.#u.state),i}getCurrentResult(){return this.#t}trackResult(e,t){return new Proxy(e,{get:(e,r)=>(this.trackProp(r),t?.(r),"promise"===r&&(this.trackProp("data"),this.options.experimental_prefetchInRender||"pending"!==this.#o.status||this.#o.reject(Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(e,r))})}trackProp(e){this.#g.add(e)}getCurrentQuery(){return this.#u}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){let t=this.#e.defaultQueryOptions(e),r=this.#e.getQueryCache().build(this.#e,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#b({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#t))}#b(e){this.#I();let t=this.#u.fetch(this.options,e);return e?.throwOnError||(t=t.catch(a.noop)),t}#w(){this.#R();let e=(0,a.resolveStaleTime)(this.options.staleTime,this.#u);if(a.isServer||this.#t.isStale||!(0,a.isValidTimeout)(e))return;let t=(0,a.timeUntilStale)(this.#t.dataUpdatedAt,e);this.#m=f.timeoutManager.setTimeout(()=>{this.#t.isStale||this.updateResult()},t+1)}#C(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#u):this.options.refetchInterval)??!1}#S(e){this.#Q(),this.#v=e,!a.isServer&&!1!==(0,a.resolveEnabled)(this.options.enabled,this.#u)&&(0,a.isValidTimeout)(this.#v)&&0!==this.#v&&(this.#y=f.timeoutManager.setInterval(()=>{(this.options.refetchIntervalInBackground||c.focusManager.isFocused())&&this.#b()},this.#v))}#x(){this.#w(),this.#S(this.#C())}#R(){this.#m&&(f.timeoutManager.clearTimeout(this.#m),this.#m=void 0)}#Q(){this.#y&&(f.timeoutManager.clearInterval(this.#y),this.#y=void 0)}createResult(e,t){let r,s=this.#u,i=this.options,n=this.#t,o=this.#c,u=this.#h,l=e!==s?e.state:this.#l,{state:c}=e,d={...c},f=!1;if(t._optimisticResults){let r=this.hasListeners(),n=!r&&y(e,t),a=r&&g(e,s,t,i);(n||a)&&(d={...d,...(0,h.fetchState)(c.data,e.options)}),"isRestoring"===t._optimisticResults&&(d.fetchStatus="idle")}let{error:m,errorUpdatedAt:v,status:x}=d;r=d.data;let R=!1;if(void 0!==t.placeholderData&&void 0===r&&"pending"===x){let e;n?.isPlaceholderData&&t.placeholderData===u?.placeholderData?(e=n.data,R=!0):e="function"==typeof t.placeholderData?t.placeholderData(this.#f?.state.data,this.#f):t.placeholderData,void 0!==e&&(x="success",r=(0,a.replaceData)(n?.data,e,t),f=!0)}if(t.select&&void 0!==r&&!R)if(n&&r===o?.data&&t.select===this.#d)r=this.#p;else try{this.#d=t.select,r=t.select(r),r=(0,a.replaceData)(n?.data,r,t),this.#p=r,this.#a=null}catch(e){this.#a=e}this.#a&&(m=this.#a,r=this.#p,v=Date.now(),x="error");let Q="fetching"===d.fetchStatus,I="pending"===x,w="error"===x,C=I&&Q,S=void 0!==r,T={status:x,fetchStatus:d.fetchStatus,isPending:I,isSuccess:"success"===x,isError:w,isInitialLoading:C,isLoading:C,data:r,dataUpdatedAt:d.dataUpdatedAt,error:m,errorUpdatedAt:v,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:Q,isRefetching:Q&&!I,isLoadingError:w&&!S,isPaused:"paused"===d.fetchStatus,isPlaceholderData:f,isRefetchError:w&&S,isStale:b(e,t),refetch:this.refetch,promise:this.#o,isEnabled:!1!==(0,a.resolveEnabled)(t.enabled,e)};if(this.options.experimental_prefetchInRender){let t=e=>{"error"===T.status?e.reject(T.error):void 0!==T.data&&e.resolve(T.data)},r=()=>{t(this.#o=T.promise=(0,p.pendingThenable)())},i=this.#o;switch(i.status){case"pending":e.queryHash===s.queryHash&&t(i);break;case"fulfilled":("error"===T.status||T.data!==i.value)&&r();break;case"rejected":("error"!==T.status||T.error!==i.reason)&&r()}}return T}updateResult(){let e=this.#t,t=this.createResult(this.#u,this.options);if(this.#c=this.#u.state,this.#h=this.options,void 0!==this.#c.data&&(this.#f=this.#u),(0,a.shallowEqualObjects)(t,e))return;this.#t=t;let r=()=>{if(!e)return!0;let{notifyOnChangeProps:t}=this.options,r="function"==typeof t?t():t;if("all"===r||!r&&!this.#g.size)return!0;let s=new Set(r??this.#g);return this.options.throwOnError&&s.add("error"),Object.keys(this.#t).some(t=>this.#t[t]!==e[t]&&s.has(t))};this.#n({listeners:r()})}#I(){let e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#u)return;let t=this.#u;this.#u=e,this.#l=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#x()}#n(e){i.notifyManager.batch(()=>{e.listeners&&this.listeners.forEach(e=>{e(this.#t)}),this.#e.getQueryCache().notify({query:this.#u,type:"observerResultsUpdated"})})}};function y(e,t){return!1!==(0,a.resolveEnabled)(t.enabled,e)&&void 0===e.state.data&&("error"!==e.state.status||!1!==t.retryOnMount)||void 0!==e.state.data&&v(e,t,t.refetchOnMount)}function v(e,t,r){if(!1!==(0,a.resolveEnabled)(t.enabled,e)&&"static"!==(0,a.resolveStaleTime)(t.staleTime,e)){let s="function"==typeof r?r(e):r;return"always"===s||!1!==s&&b(e,t)}return!1}function g(e,t,r,s){return(e!==t||!1===(0,a.resolveEnabled)(s.enabled,e))&&(!r.suspense||"error"!==e.state.status)&&b(e,r)}function b(e,t){return!1!==(0,a.resolveEnabled)(t.enabled,e)&&e.isStaleByTime((0,a.resolveStaleTime)(t.staleTime,e))}e.i(60109),e.i(82252);var x=r.createContext((t=!1,{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t})),R=r.createContext(!1);R.Provider;var Q=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function I(e,t){return function(e,t,s){let n=r.useContext(R),o=r.useContext(x),l=(0,u.useQueryClient)(s),c=l.defaultQueryOptions(e);if(l.getDefaultOptions().queries?._experimental_beforeQuery?.(c),c._optimisticResults=n?"isRestoring":"optimistic",c.suspense){let e=e=>"static"===e?e:Math.max(e??1e3,1e3),t=c.staleTime;c.staleTime="function"==typeof t?(...r)=>e(t(...r)):e(t),"number"==typeof c.gcTime&&(c.gcTime=Math.max(c.gcTime,1e3))}(c.suspense||c.throwOnError||c.experimental_prefetchInRender)&&!o.isReset()&&(c.retryOnMount=!1),r.useEffect(()=>{o.clearReset()},[o]);let h=!l.getQueryCache().get(c.queryHash),[d]=r.useState(()=>new t(l,c)),p=d.getOptimisticResult(c),f=!n&&!1!==e.subscribed;if(r.useSyncExternalStore(r.useCallback(e=>{let t=f?d.subscribe(i.notifyManager.batchCalls(e)):a.noop;return d.updateResult(),t},[d,f]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),r.useEffect(()=>{d.setOptions(c)},[c,d]),c?.suspense&&p.isPending)throw Q(c,d,o);if((({result:e,errorResetBoundary:t,throwOnError:r,query:s,suspense:i})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&(i&&void 0===e.data||(0,a.shouldThrowError)(r,[e.error,s])))({result:p,errorResetBoundary:o,throwOnError:c.throwOnError,query:l.getQueryCache().get(c.queryHash),suspense:c.suspense}))throw p.error;if(l.getDefaultOptions().queries?._experimental_afterQuery?.(c,p),c.experimental_prefetchInRender&&!a.isServer&&p.isLoading&&p.isFetching&&!n){let e=h?Q(c,d,o):l.getQueryCache().get(c.queryHash)?.promise;e?.catch(a.noop).finally(()=>{d.updateResult()})}return c.notifyOnChangeProps?p:d.trackResult(p)}(e,m,t)}e.s(["useQuery",()=>I],50702)},76533,55749,e=>{"use strict";var t=e.i(82252),r=e.i(59372),s=e.i(992);let i=r.forwardRef(({className:e,type:r,...i},n)=>(0,t.jsx)("input",{type:r,className:(0,s.cn)("flex h-10 w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-foreground placeholder:text-white/40 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary disabled:cursor-not-allowed disabled:opacity-50 backdrop-blur-sm transition-all hover:bg-white/10",e),ref:n,...i}));function n(t,r){e.A(30425).then(e=>e.logAnalyticsEvent(t,r)).catch(()=>{})}i.displayName="Input",e.s(["Input",()=>i],76533),e.i(60109),e.s(["trackEvent",()=>n],55749)},38103,e=>{"use strict";var t=e.i(82252),r=e.i(59372),s=e.i(86823),i=e.i(59427),n=e.i(76533),a=e.i(45348),o=e.i(89877),u=e.i(73406),l=e.i(47801),c=e.i(80798),h=e.i(55749),d=e.i(70337),p=e.i(67502);function f(){let e=(0,o.useTranslations)("archive"),f=(0,o.useTranslations)("common"),m=(0,a.useLocale)(),{user:y,loading:v}=(0,l.useAuth)(),g=y?.uid??"",b=e("type_label",{defaultMessage:"Type"}),[x,R]=(0,r.useState)(void 0),[Q,I]=(0,r.useState)("grammar"),[w,C]=(0,r.useState)(""),[S,T]=(0,r.useState)(""),[O,j]=(0,r.useState)(""),E=!!g&&!v,{data:M,isLoading:q}=(0,u.useArchiveList)(g,x,{enabled:E}),z=M??[];console.log("ðŸ“š Archive Page State:",{userId:g,loading:v,canLoad:E,isLoading:q,archivesCount:z.length,archives:z.slice(0,2)});let{create:A}=(0,u.useArchiveMutations)(g),[D,_]=(0,r.useState)(null),[k,N]=(0,r.useState)(null),[F,P]=(0,r.useState)(!1),{quiz:U,isLoading:L,error:K}=(0,u.useQuiz)(D||void 0,D?e("quiz_question",{title:D.title}):void 0,m,m),B=(0,r.useMemo)(()=>x?z.filter(e=>e.type===x):z,[z,x]),H=async()=>{if(!w.trim())return void c.toast.error(e("title_required"));if(!g)return void c.toast.error(f("error"));try{await A.mutateAsync({userId:g,type:Q,title:w.trim(),rootMeaning:S.trim(),examples:O?[O]:[]}),c.toast.success(f("success")),C(""),T(""),j("")}catch{c.toast.error(e("save_error"))}};return(0,t.jsx)(p.AuthGate,{children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:e("title")}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e("subtitle")})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(i.Button,{variant:void 0===x?"primary":"ghost",onClick:()=>R(void 0),children:e("all")}),(0,t.jsx)(i.Button,{variant:"grammar"===x?"primary":"ghost",onClick:()=>R("grammar"),children:e("grammar")}),(0,t.jsx)(i.Button,{variant:"word"===x?"primary":"ghost",onClick:()=>R("word"),children:e("vocabulary")})]})]}),(0,t.jsxs)(s.Card,{className:"glass-card",children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsx)(s.CardTitle,{children:e("add_title")})}),(0,t.jsxs)(s.CardContent,{className:"grid gap-3 md:grid-cols-4",children:[(0,t.jsxs)("select",{"aria-label":b,className:"h-[42px] rounded-md border border-white/10 bg-white/5 px-3 text-sm",value:Q,onChange:e=>I(e.target.value),children:[(0,t.jsx)("option",{value:"grammar",children:e("grammar")}),(0,t.jsx)("option",{value:"word",children:e("vocabulary")})]}),(0,t.jsx)(n.Input,{placeholder:e("title_placeholder"),value:w,onChange:e=>C(e.target.value)}),(0,t.jsx)(n.Input,{placeholder:e("root_placeholder"),value:S,onChange:e=>T(e.target.value)}),(0,t.jsx)(n.Input,{placeholder:e("example_placeholder"),value:O,onChange:e=>j(e.target.value)}),(0,t.jsx)(i.Button,{onClick:H,disabled:A.isPending,children:A.isPending?e("saving"):e("add_button")})]})]}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,t.jsxs)(s.Card,{className:"md:col-span-2",children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsx)(s.CardTitle,{children:e("list_title")})}),(0,t.jsxs)(s.CardContent,{className:"space-y-3",children:[(v||q||!E)&&(0,t.jsx)("p",{className:"text-muted-foreground",children:f("loading")}),!v&&!q&&E&&0===B.length&&(0,t.jsx)("p",{className:"text-muted-foreground",children:e("empty")}),B.map(r=>(0,t.jsxs)("div",{className:"rounded-lg border border-white/10 bg-white/5 p-3 hover:border-primary/40 transition cursor-pointer",onClick:()=>{_(r),(0,h.trackEvent)("quiz_started",{archiveId:r.id,type:r.type})},children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-foreground",children:r.title}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:"word"===r.type?e("vocabulary"):e("grammar")})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground line-clamp-2",children:r.rootMeaning}),(0,t.jsx)("p",{className:"text-[11px] text-muted-foreground mt-1",children:(0,d.formatDate)(r.createdAt,m)}),r.examples.length>0&&(0,t.jsx)("p",{className:"text-xs text-primary mt-1",children:r.examples[0]})]},r.id))]})]}),(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsx)(s.CardTitle,{children:e("quiz_title")})}),(0,t.jsxs)(s.CardContent,{className:"space-y-3",children:[!U&&!L&&D&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e("quiz_empty")}),L&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground animate-pulse",children:"AI ìƒì„± ì¤‘..."}),K&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:"í€´ì¦ˆ ìƒì„± ì‹¤íŒ¨"}),U&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-foreground",children:U.question}),U.options.map((r,s)=>{let i=s===U.correctIndex,n=s===k;console.log(`Option ${s}:`,{isCorrect:i,isSelected:n,showResult:F,selectedAnswer:k});let a={},o="w-full text-left px-4 py-2 rounded-lg border transition-all text-sm ";return F?i?(a={backgroundColor:"rgba(34, 197, 94, 0.2)",borderColor:"rgb(34, 197, 94)",color:"rgb(220, 252, 231)"},o+="font-semibold"):n?a={backgroundColor:"rgba(239, 68, 68, 0.2)",borderColor:"rgb(239, 68, 68)",color:"rgb(254, 226, 226)"}:o+="opacity-30":o+="bg-card border-border hover:bg-accent hover:border-accent-foreground",(0,t.jsx)("button",{disabled:F,onClick:()=>{let t=s===U.correctIndex;console.log("ðŸŽ¯ Quiz answer clicked:",{idx:s,correct:t,beforeState:{selectedAnswer:k,showResult:F}}),N(s),P(!0),console.log("âœ… State updated:",{newSelectedAnswer:s,newShowResult:!0}),(0,h.trackEvent)("quiz_answered",{archiveId:U.archiveId,selected:s,correct:t}),c.toast[t?"success":"error"](t?e("quiz_correct"):e("quiz_wrong"),{description:U.explanation}),setTimeout(()=>{console.log("ðŸ”„ Resetting quiz state"),N(null),P(!1)},7e3)},className:o,style:a,children:r},s)}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:U.explanation})]})]})]})]})]})})}e.s(["default",()=>f])},30425,e=>{e.v(t=>Promise.all(["static/chunks/8ebcbc864680d81f.js"].map(t=>e.l(t))).then(()=>t(46352)))}]);