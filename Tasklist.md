# Loglingo 작업 태스크 리스트 (디자인/기능 분업)
- 모든 작업은 PRD.md·README.md·본 Tasklist.md를 참조하며 순서대로 진행한다.
- **디자인(Gemini 3.0)**: 전체 페이지 UI/UX, 다크모드 + 글라스모피즘 일관 디자인 시스템 수립 및 페이지 구현.
- **기능(Codex)**: 데이터/로직/테스트/배포 등 기능 구현 및 검증.
- 각 기능은 Sequential Thinking MCP로 단계 쪼개기 → micro TDD(단위→통합→E2E) → 코드/테스트 작성 순으로 수행한다.
- 가능한 경우 Playwright MCP로 E2E 테스트를 작성·통과시킨 뒤에만 다음 태스크로 진행한다.
- 테스트가 불가한 항목이 있으면 `Testlist.md`에 수동 테스트 체크리스트를 추가한다.
- 모든 구현 후 테스트 통과 시 한국어 커밋 메시지로 커밋한다.

## 0. 준비
- [ ] 리포지토리 의존성 설치(`pnpm i`), 환경 변수 샘플 정리(`.env.example`), 개발/테스트/CI 명령 확인
- [ ] CI 스크립트 점검: `pnpm test`, `pnpm test:e2e`, `pnpm lhci:collect` 실행 가능 상태 확인
- [ ] 코딩 규칙/스타일 가이드 정리: ESLint/Prettier/Commit lint 규칙 확인

## 1. 아키텍처 및 공통
- [ ] Next.js 15 + TypeScript 프로젝트 기본 구조 검증, 라우트/레이아웃 스켈레톤 구성
- [ ] Firebase(Auth/Firestore/Storage) 초기 설정 및 보안 규칙 초안 적용
- [ ] 글로벌 테마(Tailwind 글라스모피즘), 폰트, 색상 토큰, UI 언어/학습 언어 분리된 i18n 셋업
- [ ] 공통 컴포넌트: 버튼/입력/카드/모달/토스트/로딩 스피너 구축
- [ ] HTTP/AI 클라이언트 래퍼(Grok API), 에러/로깅/리트라이 정책 적용
- [ ] React Query/SWR 캐싱 전략 구현(일기 리스트 60s, 유저 프로필 300s), Cloudflare CDN 헤더 세팅 포인트 정의
- [ ] 접근성/반응형 가드레일(WCAG 2.1 AA, 키보드 포커스, 375px~) 베이스라인 적용
- [ ] **클린 아키텍처 폴더 구조 정립**: domain/application/infrastructure/ui 레이어 분리, 의존성 역전 인터페이스 정의, 테스트 모킹 경로 확보

## 2. 디자인 트랙 (Gemini 3.0 담당)
- [x] **다크모드 + 글라스모피즘 디자인 시스템**: 색상 토큰, 깊이/블러 레이어, 타이포, 아이콘, 간격 스케일 정의
- [x] **공통 UI 키트**: 버튼/입력/토글/드롭다운/배지/카드/모달/툴팁/토스트/탭 컴포넌트 스타일링 및 상태(hover/focus/disabled) 정의
- [x] **레이아웃**: 글로벌 네비게이션(일기/AI 교정/아카이브/설정), 헤더/푸터, 페이지 컨테이너, 반응형(모바일 375px~) 대응
- [x] **페이지별 와이어/하이파이**: 일기 CRUD, AI 교정 뷰(문장/전체 모드), 학습 아카이브/퀴즈, 인증/온보딩, 설정(i18n) 화면
- [x] **상호작용/모션**: 주요 액션(저장/교정/퀴즈 제출) 피드백, 로딩/스켈레톤, 포커스 이동 애니메이션
- [x] **접근성**: 대비/포커스 아웃라인/키보드 트랩 체크, 다국어 폰트 페어링 가이드
- [x] **Flutter WebView 호환성**: Safe area/viewport/스크롤·제스처 동작 확인, 모바일 다크모드 대비 유지, 성능 저하 없는 애니메이션 가이드
- [x] 디자인 산출물 핸드오프: 토큰/컴포넌트 명세 + 스크린 링크 + 반응형 스펙 제공

## 3. 일기 CRUD + 이미지(기능 1) — Codex
- [ ] Firestore 스키마(users/diaries/diaryImages) 매핑, 타입 정의, 리포지토리 계층 작성
- [ ] UI: 달력/연도 탐색, 일기 작성/수정/삭제/목록/상세 뷰, 하루 1장 이미지 업로드
- [ ] 이미지 처리: WebP 변환 및 300KB 이하 리사이즈, 업로드 진행 상태/에러 핸들링
- [ ] 클라이언트/서버 단 validation(날짜 형식, 본문 길이, 이미지 규격) 및 optimistic update
- [ ] 성능: LCP 대상 위젯 지연 로딩, 메모이제이션, 코드 스플리팅
- [ ] 테스트: repository/unit, UI 컴포넌트 테스트, Playwright로 CRUD 플로우(E2E)
- [ ] 완료 시 테스트 통과 확인 후 한국어 커밋

## 4. AI 교정 & 어드바이스(기능 2) — Codex
- [ ] Grok API 연동: 문장 단위/전체 단위 모드 파라미터 처리, 3초 응답 목표를 위한 타임아웃/큐 관리
- [ ] 결과 렌더: 문법 오류/수정 제안/단어 뿌리 의미 가이드 표시, 하이라이트/툴팁 UI
- [ ] AI 요청 실패/지연 시 재시도 및 사용자 피드백(스낵바/재시도 버튼)
- [ ] 사용 지표 로깅: `ai_correct_clicked`, 응답 성공/실패 이벤트 계측
- [ ] 테스트: API 모킹 단위/통합, Playwright로 작성→교정 결과 표시 플로우
- [ ] 완료 시 테스트 통과 확인 후 한국어 커밋

## 5. 학습 아카이브 & 문제 생성(기능 3) — Codex
- [ ] Firestore 스키마(learning_archive, quiz_questions) 리포지토리/타입 정의
- [ ] AI 교정 결과 → 자주 틀리는 패턴 자동 저장 로직 구현
- [ ] 문제 자동 생성(객관식 4지선다) 및 해설 표시 UI 구현
- [ ] 학습 페이지: 필터/검색, 진행 상태 저장, 정답/오답 피드백
- [ ] 지표 로깅: `quiz_started`, 정답률/재방문 이벤트
- [ ] 테스트: 단위/통합, Playwright로 문제 풀기 플로우
- [ ] 완료 시 테스트 통과 확인 후 한국어 커밋

## 6. 계정/보안/국제화 — Codex
- [ ] Google OAuth2 로그인/로그아웃, 세션 만료(24h) 처리
- [ ] Firebase 보안 규칙(유저 데이터 소유권, 일기/학습 데이터 접근 제한) 검증
- [ ] UI 언어/학습 언어 분리 i18n 전역 적용, 날짜/숫자/시간대 현지화
- [ ] JWT/토큰 관리, HTTPS 강제, 민감 키 서버사이드 호출(Grok 키 Functions 프락시)
- [ ] 테스트: 인증 플로우 E2E, 보안 규칙 시뮬레이터/단위 테스트
- [ ] 완료 시 테스트 통과 확인 후 한국어 커밋

## 7. 품질/성능/모니터링 — Codex
- [ ] Lighthouse 성능/접근성 85/95 목표 튜닝(LCP/INP/CLS), 코드 스플리팅/이미지 최적화/프리패치
- [ ] RUM 계측(LCP/INP/CLS/TTFB), JS 오류율(Sentry), 가용성 Uptime 훅 정의
- [ ] 로깅/트레이싱: 주요 액션 이벤트/에러 스키마 표준화
- [ ] Firebase + Cloudflare 캐싱 정책 검증, 에지 TTL 설정 확인
- [ ] 테스트: `pnpm lhci:collect` 실행, 성능 회귀 체크
- [ ] 완료 시 테스트 통과 확인 후 한국어 커밋

## 8. 배포/릴리즈 — Codex
- [ ] 배포 파이프라인 구성(Firebase Hosting, 환경 분리), CDN 헤더 검증
- [ ] 마이그레이션 버전 전략 적용(version 필드, shadow write/double read/switch 단계)
- [ ] 릴리즈 체크리스트 작성 및 실행(테스트 결과, 접근성 스캔, 보안 점검)
- [ ] 완료 시 최종 통합 테스트 후 한국어 커밋

## 9. 운영 이후 — Codex
- [ ] 주간 지표 리포트 템플릿 작성(일기 작성율, AI 사용률, 퀴즈 참여율, D1/D7)
- [ ] 비용 모니터링(호스팅/AI 호출/스토리지), 최적화 플랜 수립
- [ ] 피드백 수집 루프(사용자 제안 → 백로그 반영 프로세스)

## 진행 체크 방법
- 각 태스크 완료 시 체크박스 표시, 관련 테스트 결과 요약을 Tasklist.md에 메모
- Playwright 불가 항목은 Testlist.md에 수동 테스트 체크리스트 추가
- 각 단계별 테스트 통과 후 한국어 커밋 메시지로 기록
